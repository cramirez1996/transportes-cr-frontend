<div class="container mx-auto px-4 py-8">
  <div class="max-w-2xl mx-auto">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">
      {{ isEditMode ? 'Editar Transacción' : 'Nueva Transacción' }}
    </h1>

    <div *ngIf="error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg mb-4">
      {{ error }}
    </div>

    <form *ngIf="!loading" [formGroup]="transactionForm" (ngSubmit)="onSubmit()" class="bg-white rounded-lg shadow-md p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Tipo <span class="text-red-500">*</span></label>
          <select formControlName="type" class="w-full border border-gray-300 rounded-lg px-3 py-2">
            <option [value]="TransactionType.INCOME">Ingreso</option>
            <option [value]="TransactionType.EXPENSE">Gasto</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Categoría <span class="text-red-500">*</span></label>
          <select formControlName="categoryId" class="w-full border border-gray-300 rounded-lg px-3 py-2">
            <option value="">Seleccione una categoría</option>
            <option *ngFor="let cat of filteredCategories" [value]="cat.id">{{ cat.name }}</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Monto <span class="text-red-500">*</span></label>
          <input type="number" formControlName="amount" class="w-full border border-gray-300 rounded-lg px-3 py-2" min="0" step="1" />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Fecha <span class="text-red-500">*</span></label>
          <input type="date" formControlName="date" class="w-full border border-gray-300 rounded-lg px-3 py-2" />
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Método de Pago <span class="text-red-500">*</span></label>
          <select formControlName="paymentMethod" class="w-full border border-gray-300 rounded-lg px-3 py-2">
            <option [value]="PaymentMethod.CASH">Efectivo</option>
            <option [value]="PaymentMethod.TRANSFER">Transferencia</option>
            <option [value]="PaymentMethod.CARD">Tarjeta</option>
            <option [value]="PaymentMethod.CHECK">Cheque</option>
          </select>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Número de Referencia</label>
          <input type="text" formControlName="referenceNumber" class="w-full border border-gray-300 rounded-lg px-3 py-2" placeholder="Ej: Boleta 123" />
        </div>
      </div>

      <div class="mt-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">Descripción <span class="text-red-500">*</span></label>
        <textarea formControlName="description" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2"></textarea>
      </div>

      <div class="flex justify-end gap-4 mt-6">
        <button type="button" (click)="cancel()" class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" [disabled]="saving">
          Cancelar
        </button>
        <button type="submit" class="px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50" [disabled]="saving || transactionForm.invalid">
          {{ saving ? 'Guardando...' : (isEditMode ? 'Actualizar' : 'Crear Transacción') }}
        </button>
      </div>
    </form>
  </div>
</div>
